var brushSize=4,currentColor="rgb(0,0,0)",cancelledOperations=[],Stroke=function(){this.points=[];this.isAlive=!0};Stroke.prototype.update=function(){if(this.isAlive){pointerFocused()&&0==menuIsOpen()&&this.points.push([pointerX,pointerY,brushSize,currentColor]);for(var a=0;a<this.points.length-1;a++)drawLine(this.points[a][0],this.points[a][1],this.points[a+1][0],this.points[a+1][1],this.points[a][2],this.points[a][3])}};Stroke.prototype.end=function(){1==this.isAlive&&(this.isAlive=!1,strokes.push(this.points))};
var strokes=[],currentStroke;function drawLine(a,b,c,d,e,f){stroke(f);strokeWeight(e);line(a,b,c,d)}function drawStrokes(){for(var a=0;a<strokes.length;a++)for(var b=0;b<strokes[a].length-1;b++)drawLine(strokes[a][b][0],strokes[a][b][1],strokes[a][b+1][0],strokes[a][b+1][1],strokes[a][b][2],strokes[a][b][3])}function updateBrush(){var a=document.getElementById("brush-slider");a=parseInt(a.value);document.getElementById("brush-slider-label").innerHTML="Brush Size   "+a;brushSize=a}
function setColor(a){currentColor=a}function clearScreen(){strokes=[];cancelledOperations=[];currentStroke.end()}function undo(){0<strokes.length&&(cancelledOperations.push(strokes[strokes.length-1]),strokes.pop())}function redo(){0<cancelledOperations.length&&(strokes.push(cancelledOperations[cancelledOperations.length-1]),cancelledOperations.pop())};